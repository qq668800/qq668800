#====================================================================================
# @ConfigName        LingKeQingå‚è€ƒå®ä¾‹é…ç½®
# @Author            @KissKeQing
# @Illustrate        æœ¬é…ç½®å‚è€ƒ @SukkaW å¤§ä½¬æå‡ºçš„åˆ†æµæ‰€å°è¯•è‡ªç”¨æµ‹è¯•çš„ Verge Rev ç‰ˆæœ¬è§„åˆ™
#                    éƒ¨åˆ†è§„åˆ™æ ¹æ®ä½œè€…ä½¿ç”¨éœ€æ±‚è¿›è¡Œäº†ä¸€äº›è°ƒæ•´ï¼Œæˆ‘ä¸å¯¹æœ¬è§„åˆ™ä»»ä½•éƒ¨åˆ†è´Ÿæœ‰è´£ä»»ï¼ˆé”šç‚¹éƒ¨åˆ†å†™çš„ç‰¹åˆ«çƒ‚ï¼‰
#                    æ‚¨ä¸åº”å½“å› ä¸ºæœ¬è§„åˆ™çš„å†…å®¹è€Œå»æ‰“æ‰° @SukkaW å¤§ä½¬ï¼Œå¤§éƒ¨åˆ†è§„åˆ™æ”¯æŒå¯ä»¥åœ¨
#                    blog.skk.moe/post/i-have-my-unique-surge-setup/ ä¸­å¯»å¾—
# @Thanks            @SukkaW @Semporia @blackmatrix7 @ACL4SSR     
#====================================================================================
host: &host industry-fab.dingtalk.com
port: 7890
socks-port: 7891
mixed-port: 7893
allow-lan: false
bind-address: "*"
mode: rule
log-level: info
ipv6: false
geo-update-interval: 24
find-process-mode: strict
external-controller: 127.0.0.1:9090
dns:
  enable: true
  ipv6: false
  listen: 0.0.0.0:53
  prefer-h3: true #å»ºè®® false é™¤éä½ çŸ¥é“è¿™æ˜¯ä»€ä¹ˆ
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - "*.lan"
    - localhost.ptlogin2.qq.com
    - +.srv.nintendo.net
    - +.stun.playstation.net
    - +.msftconnecttest.com
    - +.msftncsi.com
    - +.xboxlive.com
    - msftconnecttest.com
    - xbox.*.microsoft.com
    - "*.battlenet.com.cn"
    - "*.battlenet.com"
    - "*.blzstatic.cn"
    - "*.battle.net"
  default-nameserver:
    - 223.5.5.5
    - 119.29.29.29
  nameserver:
    - https://doh.pub/dns-query
    - https://dns.alidns.com/dns-query
  fallback-filter:
    geoip: true
    geoip-code: CN
    ipcidr:
      - 240.0.0.0/4
#========= å»ºç«‹é”šç‚¹ =========#
# ä»£ç†èŠ‚ç‚¹é€‰æ‹©ç»„
selected_proxy_group: &selected_proxy_group
  type: select
  proxies:
    - ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
    - ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
    - ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
    - DIRECT
# ï¼ˆèŠ‚ç‚¹ï¼‰èŠ‚ç‚¹è¿é€šæ€§æ£€æŸ¥ 
healthy_check_group: &healthy_check_group
  type: http
  interval: 86400
  health-check:
    enable: true
    url: http://www.gstatic.com/generate_204
    interval: 1800
# ï¼ˆèŠ‚ç‚¹é€‰æ‹©ï¼‰è‡ªåŠ¨é€‰æ‹©ä»£ç†
auto_select_group: &auto_select_group
  type: url-test
  lazy: true
  url: http://www.gstatic.com/generate_204
  interval: 900
  use:
    - Subscribe
# ï¼ˆèŠ‚ç‚¹é€‰æ‹©ï¼‰æ‰‹åŠ¨é€‰æ‹©ä»£ç†
manual_proxy_group: &manual_proxy_group
  type: select
  use:
    - Subscribe
# ä¼ ç»ŸHTTPä»£ç†èŠ‚ç‚¹ç»„
classical_http_group: &classical_http_group
  type: http
  behavior: classical
  interval: 86400
# åŸŸåHTTPä»£ç†èŠ‚ç‚¹ç»„
domain_http_group: &domain_http_group
  type: http
  behavior: domain
  interval: 86400
# IP/CIDR HTTPä»£ç†èŠ‚ç‚¹ç»„
ipcidr_http_group: &ipcidr_http_group
  type: http
  behavior: ipcidr
  interval: 86400
#========= é”šç‚¹ç»“æŸ =========#

proxy-providers:
  Subscribe:
    !!merge <<: *healthy_check_group
    url: http://sub.store/download/%E6%9C%A8%E7%93%9C?target=Stash
    path: ./proxy_providers/tmp.yaml
proxy-groups:
  - {name: å›½å¤–, !!merge <<: *selected_proxy_group, proxies: [ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, DIRECT], type: select}
  - {name: å›½å†…, !!merge <<: *selected_proxy_group, proxies: [å›½å†…èŠ‚ç‚¹, DIRECT], type: select}
  - {name: Netflix, !!merge <<: *selected_proxy_group}
  - {name: Speedtest, !!merge <<: *selected_proxy_group}
  - name: å›½å†…èŠ‚ç‚¹
    type: url-test
    interval: 900
    lazy: true
    use:
      - Subscribe
    filter: (?i)(ä¸­å›½|CN|China|æ¹–|è‹|æµ™|å‰|å››å·|æ–°ç–†|è¥¿è—|é»‘|å®|å¾½|æ±Ÿ|åº†ï½œæ´¥|å—|è‚ƒ|è´µ|å¹¿å·|åŒ—|å¹¿ä¸œ)
  - {name: ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, !!merge <<: *auto_select_group, filter: "æ¸¯|HK|(?i)Hong"}
  - {name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, !!merge <<: *auto_select_group, filter: "æ—¥|ä¸œäº¬|JP|(?i)Japan"}
  - {name: ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, !!merge <<: *auto_select_group, filter: "å°|æ¹¾|TW|(?i)Taiwan"}
rule-providers:
  # å¤§éƒ¨åˆ†å€Ÿé‰´äº†ç‹ç‹çš„è§„åˆ™ï¼Œå°éƒ¨åˆ†åšäº†è°ƒæ•´
  Ad-Domain:
    !!merge <<: *domain_http_group
    format: text
    url: https://ruleset.skk.moe/List/domainset/reject.conf
    path: ./ruleset/anti-ad-domain.conf
  Ad-Rule:
    !!merge <<: *classical_http_group
    format: text
    url: https://ruleset.skk.moe/List/non_ip/reject.conf
    path: ./ruleset/anti-ad-rule.conf
  QUIC-Block:
    !!merge <<: *classical_http_group
    format: text
    url: https://ruleset.skk.moe/List/non_ip/reject-no-drop.conf
    path: ./ruleset/quic-block.conf
  Adobe-Block:
    !!merge <<: *classical_http_group
    format: text
    url: https://ruleset.skk.moe/List/non_ip/reject-drop.conf
    path: ./ruleset/adobe-block.conf
  CDN-Domain:
    !!merge <<: *domain_http_group
    format: text
    url: https://ruleset.skk.moe/List/domainset/cdn.conf
    path: ./ruleset/cdn-domain.conf
  CDN:
    !!merge <<: *classical_http_group
    format: text
    url: https://ruleset.skk.moe/List/non_ip/cdn.conf
    path: ./ruleset/cdn-nonip.conf
  Speedtest:
    !!merge <<: *domain_http_group
    format: text
    url: https://ruleset.skk.moe/List/domainset/speedtest.conf
    path: ./ruleset/speedtest.conf
  Stream:
    !!merge <<: *classical_http_group
    format: text
    url: https://ruleset.skk.moe/List/non_ip/stream.conf
    path: ./ruleset/stream.conf
  Telegram:
    !!merge <<: *classical_http_group
    format: text
    url: https://ruleset.skk.moe/List/non_ip/telegram.conf
    path: ./ruleset/telegram.conf
  Apple-CDN:
    !!merge <<: *classical_http_group
    format: text
    url: https://ruleset.skk.moe/List/non_ip/apple_cdn.conf
    path: ./ruleset/apple_cdn.conf
  Microsoft_CDN:
    !!merge <<: *classical_http_group
    format: text
    url: https://ruleset.skk.moe/List/non_ip/microsoft_cdn.conf
    path: ./ruleset/microsoft_cdn.conf
  Download-Domain:
    !!merge <<: *domain_http_group
    format: text
    url: https://ruleset.skk.moe/List/domainset/download.conf
    path: ./ruleset/download_Domain.conf
  Download:
    !!merge <<: *classical_http_group
    format: text
    url: https://ruleset.skk.moe/List/non_ip/download.conf
    path: ./ruleset/download_nonip.conf
  Apple-CN:
    !!merge <<: *domain_http_group
    format: text
    url: https://ruleset.skk.moe/List/non_ip/apple_cn.conf
    path: ./ruleset/apple-cn.conf
  Apple:
    !!merge <<: *classical_http_group
    format: text
    url: https://ruleset.skk.moe/List/non_ip/apple_services.conf
    path: ./ruleset/apple.conf
  Microsoft:
    !!merge <<: *classical_http_group
    format: text
    url: https://ruleset.skk.moe/List/non_ip/microsoft.conf
    path: ./ruleset/microsoft.conf
  # æ­¤å¤„è§„åˆ™æ¢æºè‡³ @blackmatrix7

  AIGC:
    !!merge <<: *classical_http_group
    format: text
    url: https://raw.githubusercontent.com/QingRex/Clash/main/AI.list
    path: ./ruleset/AI.list
  ### ä»¥ä¸‹è§„åˆ™ä¸ºä¸ªäººéœ€è¦æ·»åŠ 

  GoogleFCM:
    !!merge <<: *classical_http_group
    format: text
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/GoogleFCM.list
    path: ./ruleset/GoogleFCM.list
  Epic:
    !!merge <<: *classical_http_group
    format: text
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Epic.list
    path: ./ruleset/Epic.list
  Steam:
    !!merge <<: *classical_http_group
    format: text
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Steam/Steam.list
    path: ./ruleset/Steam.list
  YouTube:
    !!merge <<: *classical_http_group
    format: text
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/YouTube/YouTube.list
    path: ./ruleset/YouTube.list
  Google_Search:
    !!merge <<: *classical_http_group
    format: text
    url: https://raw.githubusercontent.com/bunizao/TutuBetterRules/tutu/RuleList/DOMAlN/Google_Search.list
    path: ./ruleset/Google_Search.list
  Netflix:
    !!merge <<: *classical_http_group
    format: text
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Netflix.list
    path: ./ruleset/Netflix.list
  BilibiliHMT:
    !!merge <<: *classical_http_group
    format: text
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/BilibiliHMT.list
    path: ./ruleset/BilibiliHMT.text
  ChinaMedia:
    !!merge <<: *classical_http_group
    format: text
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaMedia.list
    path: ./ruleset/ChinaMedia.list
  GFW:
    !!merge <<: *classical_http_group
    format: text
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ProxyGFWlist.list
    path: ./ruleset/ProxyGFW.list
  Bahamut:
    !!merge <<: *classical_http_group
    format: text
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Bahamut.list
    path: ./ruleset/Bahamut.list
  OneDrive:
    !!merge <<: *classical_http_group
    format: text
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/OneDrive.list
    path: ./ruleset/OneDrive.list
  Twitter:
    !!merge <<: *classical_http_group
    format: text
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Twitter/Twitter.list
    path: ./ruleset/Twitter.list
  Game:
    !!merge <<: *classical_http_group
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Game/Game.yaml
    path: ./ruleset/Game.yaml
  ### ä»¥ä¸‹è§„åˆ™å›æºè‡³ @SukkaW 

  Global:
    !!merge <<: *domain_http_group
    format: text
    url: https://ruleset.skk.moe/List/non_ip/global.conf
    path: ./ruleset/global.conf
  China:
    !!merge <<: *classical_http_group
    format: text
    url: https://ruleset.skk.moe/List/non_ip/domestic.conf
    path: ./ruleset/domestic.conf
  Dirct:
    !!merge <<: *classical_http_group
    format: text
    url: https://ruleset.skk.moe/List/non_ip/direct.conf
    path: ./ruleset/direct.conf
  Local:
    !!merge <<: *classical_http_group
    format: text
    url: https://ruleset.skk.moe/List/non_ip/lan.conf
    path: ./ruleset/local.conf
  # æœªæŸ¥è¯¢åˆ° skk.moe æœ‰å…¼å®¹ Clash ç³» IP è§„åˆ™çš„æ–‡ä»¶

  Lan:
    !!merge <<: *ipcidr_http_group
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Lan/Lan.yaml
    path: ./ruleset/Lan.yaml
  China-IP:
    !!merge <<: *ipcidr_http_group
    format: text
    url: https://ruleset.skk.moe/Clash/ip/china_ip.txt
    path: ./ruleset/china_ip.conf
rules:
  # æ€æƒ³ï¼šç¿»å¢™ä¸»åŠ›å…¨éƒ¨æ˜¯ Topic èŠ‚ç‚¹è¿‡å»ï¼Œå¦‚æœ‰éœ€è¦è‡ªè¡Œæ·»åŠ 
  - RULE-SET,Ad-Domain,å›½å¤–
  - RULE-SET,Ad-Rule,å›½å¤–
  - RULE-SET,QUIC-Block,å›½å¤–
  - RULE-SET,Adobe-Block,å›½å¤–
  - RULE-SET,AIGC,å›½å¤–
  - RULE-SET,CDN-Domain,å›½å¤–
  - RULE-SET,CDN,å›½å¤–
  - RULE-SET,Telegram,å›½å¤–
  - RULE-SET,Netflix,Netflix
  - RULE-SET,Twitter,å›½å¤–
  - RULE-SET,YouTube,å›½å¤–
  - RULE-SET,Google_Search,å›½å¤–
  - RULE-SET,GoogleFCM,å›½å¤–
  - RULE-SET,Bahamut,ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
  - RULE-SET,Apple-CDN,å›½å†…
  - RULE-SET,Apple-CN,å›½å†…
  - RULE-SET,Apple,å›½å†…
  - RULE-SET,OneDrive,å›½å¤–
  - RULE-SET,Microsoft_CDN,å›½å†…
  - RULE-SET,Microsoft,å›½å¤–
  - RULE-SET,Stream,å›½å¤–
  # - PROCESS-NAME,r5apex.exe, ğŸ‡­ğŸ‡° HongKong #Steamç‰ˆæœ¬Apexå¯ä»¥æ‰“å¼€
  - RULE-SET,Download-Domain,å›½å†…
  - RULE-SET,Download,å›½å†…
  - RULE-SET,Epic,å›½å¤–
  - RULE-SET,Steam,å›½å¤–
  - RULE-SET,Game,å›½å¤–
  - RULE-SET,GFW,å›½å¤–
  - RULE-SET,Global,å›½å¤–
  - RULE-SET,Speedtest,Speedtest
  - RULE-SET,BilibiliHMT,å›½å†…
  - RULE-SET,ChinaMedia,å›½å†…
  - RULE-SET,China,å›½å†…
  - RULE-SET,Dirct,å›½å†…
  - RULE-SET,Local,å›½å†…
  - RULE-SET,Lan,å›½å†…
  - RULE-SET,China-IP,å›½å†…
  # - GEOIP,CN,DIRECT #æœ‰å¾…å•†æ¦·æ˜¯å¦å¯ç”¨
  - MATCH,å›½å¤–
